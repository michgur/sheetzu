const std = @import("std");

const Key = @This();

code: Code,
bytes: []const u8,

// don't read into it too much, just an enum of keys
pub const Code = enum(u64) {
    const ALT = 1 << 63;

    nul = 0x00,
    tab = 0x09,
    enter = 0x0D,
    escape = 0x1B,
    space = 0x20,
    backspace = 0x7F,
    equal = 0x3D,
    open_square_bracket = 0x5b,
    a = 0x61,
    b = 0x62,
    c = 0x63,
    d = 0x64,
    e = 0x65,
    f = 0x66,
    g = 0x67,
    h = 0x68,
    i = 0x69,
    j = 0x6a,
    k = 0x6b,
    l = 0x6c,
    m = 0x6d,
    n = 0x6e,
    o = 0x6f,
    p = 0x70,
    q = 0x71,
    r = 0x72,
    s = 0x73,
    t = 0x74,
    u = 0x75,
    v = 0x76,
    w = 0x77,
    x = 0x78,
    y = 0x79,
    z = 0x7a,
    A = 0x41,
    B = 0x42,
    C = 0x43,
    D = 0x44,
    E = 0x45,
    F = 0x46,
    G = 0x47,
    H = 0x48,
    I = 0x49,
    J = 0x4a,
    K = 0x4b,
    L = 0x4c,
    M = 0x4d,
    N = 0x4e,
    O = 0x4f,
    P = 0x50,
    Q = 0x51,
    R = 0x52,
    S = 0x53,
    T = 0x54,
    U = 0x55,
    V = 0x56,
    W = 0x57,
    X = 0x58,
    Y = 0x59,
    Z = 0x5a,
    csi = 0x9b,
    arrow_up,
    arrow_down,
    arrow_left,
    arrow_right,
    alt_a = ALT | 0x61,
    alt_b = ALT | 0x62,
    alt_c = ALT | 0x63,
    alt_d = ALT | 0x64,
    alt_e = ALT | 0x65,
    alt_f = ALT | 0x66,
    alt_g = ALT | 0x67,
    alt_h = ALT | 0x68,
    alt_i = ALT | 0x69,
    alt_j = ALT | 0x6a,
    alt_k = ALT | 0x6b,
    alt_l = ALT | 0x6c,
    alt_m = ALT | 0x6d,
    alt_n = ALT | 0x6e,
    alt_o = ALT | 0x6f,
    alt_p = ALT | 0x70,
    alt_q = ALT | 0x71,
    alt_r = ALT | 0x72,
    alt_s = ALT | 0x73,
    alt_t = ALT | 0x74,
    alt_u = ALT | 0x75,
    alt_v = ALT | 0x76,
    alt_w = ALT | 0x77,
    alt_x = ALT | 0x78,
    alt_y = ALT | 0x79,
    alt_z = ALT | 0x7a,
    alt_A = ALT | 0x41,
    alt_B = ALT | 0x42,
    alt_C = ALT | 0x43,
    alt_D = ALT | 0x44,
    alt_E = ALT | 0x45,
    alt_F = ALT | 0x46,
    alt_G = ALT | 0x47,
    alt_H = ALT | 0x48,
    alt_I = ALT | 0x49,
    alt_J = ALT | 0x4a,
    alt_K = ALT | 0x4b,
    alt_L = ALT | 0x4c,
    alt_M = ALT | 0x4d,
    alt_N = ALT | 0x4e,
    alt_O = ALT | 0x4f,
    alt_P = ALT | 0x50,
    alt_Q = ALT | 0x51,
    alt_R = ALT | 0x52,
    alt_S = ALT | 0x53,
    alt_T = ALT | 0x54,
    alt_U = ALT | 0x55,
    alt_V = ALT | 0x56,
    alt_W = ALT | 0x57,
    alt_X = ALT | 0x58,
    alt_Y = ALT | 0x59,
    alt_Z = ALT | 0x5a,
    _,

    pub fn alt(code: Code) Code {
        return @enumFromInt(@intFromEnum(code) | ALT);
    }
};

const CSI = [_]Code{ .arrow_up, .arrow_down, .arrow_right, .arrow_left };
pub fn fromCSI(value: u8) Code {
    return CSI[value - 'A'];
}
